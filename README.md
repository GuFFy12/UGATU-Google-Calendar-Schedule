<div align="center">

# UGATU-Google-Calendar-Schedule
  
<img src="https://media.discordapp.net/attachments/959412635814756402/1157606686173958256/IMG_4167.png?ex=651938bd&is=6517e73d&hm=b8cf69a6ff9d5a0d49157d4ee3917ce69f196eabcfdc0bfb393af5e216510783&=" alt="logo" width="45%" />
<br> <br>

## Интеграция расписания УГАТУ в Google Календарь

Этот проект позволяет интегрировать расписание Уфимского Государственного Авиационного Технического Университета (УГАТУ) в ваш Google Календарь. Таким образом, вы сможете использовать это расписание с Apple, Siri и другими сервисами, поддерживающими Google Calendar API.

## TODO

</div>

1. **Расширение функционала**: В настоящее время сервис работает только для индивидуального использования. Планируется добавить возможность создания отдельных календарей для всех групп и преподавателей.

2. **Цвета занятий**: Возможно, будет добавлена возможность создания нескольких календарей по типам с разным цветом, что бы цвета не терялись при экспорте календаря.

<div align="center">

## Установка

</div>

Чтобы начать использовать этот сервис, выполните следующие шаги:

1. Создайте новый проект в Google Cloud Platform (GCP). Вы можете это сделать, перейдя по [ссылке](https://developers.google.com/workspace/guides/create-project).

2. Включите Google Calendar API в настройках проекта GCP. Для этого перейдите в "Enabled API Services" и найдите "Google Calendar API". Активируйте его.

3. Создайте информацию о согласии (OAuth consent screen) для вашего проекта. В разделе "Scopes" добавьте первые три пункта, а также "Google Calendar API". В разделе "Test users" добавьте свою почту.

4. Перейдите в раздел "Credentials" и создайте учетные данные (OAuth client ID) для веб-приложения (Web application). В поле "Authorized redirect URIs" укажите `http://localhost:8080/`. Скачайте файл JSON с учетными данными и переименуйте его в `client_secret.json`, затем поместите его в корневую папку вашего проекта.

5. Настройте файл `settings.ini` следующим образом:
   - `default_calendar`: Ваш адрес электронной почты / ID вторичного календаря.
   - `schedule_semester_id`: ID текущего семестра.
   - `schedule_type`: 1 для расписания группы, 2 для расписания преподавателя.
   - `student_group_or_teacher_id=2575`: ID группы (если `schedule_type` равен 1) / ID преподавателя (если `schedule_type` равен 2).
   - `minutes_before_popup_reminder_first_lesson`: За сколько минут перед началом первой пары отправлять уведомление.
   - `minutes_before_popup_reminder`: За сколько минут перед началом каждой последующей пары отправлять уведомление.

6. Запустите скрипт `main.py`. На странице авторизации Google подтвердите доступ к вашему календарю.

7. Готово! Теперь ваше расписание появится в Google Календаре.

8. Для автоматизации обновления расписания, можете использовать pm2. Пример: `pm2 start main.py --name UGCS --interpreter python3 --no-autorestart --cron-restart="*/30 * * * *"`.
